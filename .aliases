# ========================
# General Functions
# ========================
mkcd() { mkdir -p "$1" && cd "$1"; }
cdf() { cd *$1*/; } # Navigate to a directory matching a pattern
ytt() {
  if [ -z "$1" ]; then
    echo "Usage: ytt <youtubelink>"
    return 1
  fi
  yt_transcript_output=$(yt --transcript "$1")
  echo "$yt_transcript_output" | fabric --stream --pattern extract_wisdom
}
extract() {
  if [[ -z "$1" || "$1" == "-h" || "$1" == "--help" ]]; then
    echo "Usage: extract <archive> [directory]"
    echo "Supports: tar.bz2, tar.gz, tar.xz, bz2, gz, zip, 7z, etc."
  else
    case "$1" in
      *.tar.bz2|*.tbz2|*.tbz) tar xvjf "$1" ;;
      *.tar.gz|*.tgz) tar xvzf "$1" ;;
      *.tar.xz) tar xvJf "$1" ;;
      *.tar) tar xvf "$1" ;;
      *.zip) unzip "$1" ;;
      *.7z) 7z x "$1" ;;
      *.gz) gunzip "$1" ;;
      *.bz2) bunzip2 "$1" ;;
      *.xz|*.txz|*.lzma|*.tlz) xz -d "$1" ;;
      *) echo "Unsupported file type: $1" ;;
    esac
  fi
}

# ========================
# File Management
# ========================
alias cp="rsync -avhW --no-compress --progress" # Use rsync for copying files
alias mkdir='mkdir -pv'                         # Create directories with parents
alias ls="ls --color=auto"                      # Colorize `ls` output
alias ll="ls -la --color=auto"                  # Detailed list with hidden files
alias l.="ls -d .* --color=auto"                # List hidden files only
alias findr='\fd'                               # Faster alternative to `find`

# ========================
# System Management
# ========================
alias please="sudo !!"                           # Run the last command with sudo
alias h="history"                                # Show command history
alias j="jobs -l"                                # List jobs
alias reload="exec ${SHELL} -l"                  # Reload the shell
alias meminfo="free -m -l -t"                    # Show memory info
alias psmem="ps auxf | sort -nr -k 4 | head -10" # Top 10 memory consumers
alias pscpu="ps auxf | sort -nr -k 3 | head -10" # Top 10 CPU consumers
alias cpuinfo="lscpu"                            # CPU information
alias ports="netstat -tulanp"                    # List open ports
alias lsport="sudo lsof -i"                      # List processes using ports
alias ip="dig +short myip.opendns.com @resolver1.opendns.com" # Public IP

# ========================
# Networking
# ========================
alias nmap_open_ports="nmap --open"
alias nmap_list_interfaces="nmap --iflist"
alias nmap_slow="sudo nmap -sS -v -T1"
alias nmap_fin="sudo nmap -sF -v"
alias nmap_fast="nmap -F -T5 --version-light --top-ports 300"
alias nmap_full="sudo nmap -sS -T4 -PE -PP -PS80,443 -PY -g 53 -A -p1-65535 -v"

# ========================
# Media & Downloads
# ========================
alias ytmp3="youtube-dl --extract-audio --audio-format"
alias wget='wget --no-hsts'                      # Prevent `.wget-hsts` creation
alias get='wget -m -np -c -R "index.html*"'      # Download a website recursively
alias playmp3='for i in *.mp3; do mplayer "$i"; done' # Play MP3s in the current directory
alias music="mplayer --shuffle *"                # Shuffle and play all media files

# ========================
# Navigation
# ========================
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias ~="cd ~" # `cd` is shorter but included for clarity
alias dl="cd ~/Downloads"
alias dt="cd ~/Desktop"
alias p="cd ~/projects"

# ========================
# Git and Development
# ========================
alias code="flatpak run com.visualstudio.code"   # VS Code
alias studio="flatpak run com.visualstudio.code" # Alias for the same
alias gitstatus="git status -s"
alias gita="git add -A"
alias gitcm="git commit -m"
alias gitp="git push"

# ========================
# Fun and Miscellaneous
# ========================
alias neofetch="neofetch | lolcat"
alias lweather="ansiweather -l minto ontario"
alias now="date +%T"                             # Show current time
alias week="date +%V"                            # Show the current week number
alias please="sudo !!"                           # Re-run last command with sudo
alias :q="exit"                                  # Easy exit alias
alias chx="chmod +x"                             # Make a script executable

# ========================
# Tmux Shortcuts
# ========================
alias ta="tmux attach -t"
alias ts="tmux new-session -s"
alias tl="tmux list-sessions"

# ========================
# Miscellaneous Tools
# ========================
alias bc="bc -l"                                 # Calculator
alias sha1="openssl sha1"                        # Generate SHA1 digest
alias flushmcd='echo "flush_all" | nc 10.10.27.11 11211' # Flush Memcached
alias vnstat="vnstat -i eth1"                    # Network usage stats

# ========================
# Default Applications
# ========================
alias browser="google-chrome-stable"
alias vlc="vlc"
alias spotify="flatpak run com.spotify.Client"
alias discord="flatpak run com.discordapp.Discord"
alias teams="flatpak run com.microsoft.Teams"

# ========================
# Custom
# ========================
alias loo=" | lolcat"                            # Pipe outputs to lolcat
alias grep="grep --color=auto"                   # Colorize grep output
alias quickgit='f() { git add . && git commit -m "$*" && git push; }; f'
alias updateall='sudo pacman -Syu && flatpak update -y && sudo snap refresh && sudo oh-my-posh update'
